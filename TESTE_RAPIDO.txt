â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ğŸ”¥ TESTE RÃPIDO - Execute no Site Clonado            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£ Acesse o site clonado que vocÃª quer monitorar

2ï¸âƒ£ Abra o Console do navegador (pressione F12)

3ï¸âƒ£ Cole e execute este cÃ³digo:

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

fetch('https://cc-sorteador.on-forge.com/api/collect', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    mode: 'cors',
    body: JSON.stringify({
        sessionId: 'teste_' + Date.now(),
        domain: window.location.hostname,
        url: window.location.href,
        referrer: document.referrer,
        screenResolution: screen.width + 'x' + screen.height,
        language: navigator.language,
        timestamp: new Date().toISOString(),
        requests: [{
            type: 'teste_console',
            message: 'Teste do site ' + window.location.hostname,
            timestamp: new Date().toISOString()
        }]
    })
})
.then(r => {
    console.log('ğŸ“Š Status:', r.status);
    return r.json();
})
.then(data => {
    console.log('âœ… SUCESSO! Dados enviados:', data);
    console.log('ğŸ‰ ID do log:', data.id);
    console.log('\nâœ… EstÃ¡ funcionando! Pode configurar o GTM.');
})
.catch(err => {
    console.error('âŒ ERRO:', err.message);
    console.log('\nğŸ”§ SOLUÃ‡ÃƒO:');
    if (err.message.includes('CORS')) {
        console.log('âŒ Problema de CORS detectado!');
        console.log('ğŸ“ Execute no servidor Laravel:');
        console.log('   php artisan config:clear');
        console.log('   php artisan cache:clear');
    }
});

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“Š RESULTADOS ESPERADOS:

âœ… Se funcionar:
   Status: 201
   Resposta: {"status":"success","id":123}
   â†’ Pode configurar o GTM normalmente

âŒ Se der erro:
   "CORS policy" ou "Failed to fetch"
   â†’ Execute os comandos de soluÃ§Ã£o abaixo

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ”§ SOLUÃ‡ÃƒO PARA ERRO DE CORS:

No servidor Laravel, execute:

php artisan config:clear
php artisan cache:clear
php artisan route:clear

Se ainda nÃ£o funcionar, verifique se o arquivo config/cors.php
tem 'allowed_origins' => ['*']

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ’¡ DICA RÃPIDA:

Se o teste acima funcionar âœ… mas o GTM nÃ£o funciona âŒ,
o problema estÃ¡ na configuraÃ§Ã£o da Tag no GTM, nÃ£o no servidor.

Verifique:
- Tag tipo: HTML Personalizado
- Acionador: All Pages
- Script completo colado
- Tag publicada (nÃ£o sÃ³ em visualizaÃ§Ã£o)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
